<div *ngIf="$cart | async as cart" class="row">
  <!-- List of items-->
  <section class="col-lg-8">
    <div class="d-flex justify-content-between align-items-center pt-3 pb-4 pb-sm-5 mt-1">
      <h2 class="h6 text-light mb-0" i18n="@@checkoutTitle">Products</h2>
      <a class="btn btn-outline-primary btn-sm ps-2" routerLink="/products">
        <i class="bi bi-arrow-left me-2"></i>
        <ng-container i18n="@@checkoutContinue">Continue shopping</ng-container>
      </a>
    </div>
    <!-- Item-->
    <div *ngFor="let cartItem of cart.items; let i = index" class="d-sm-flex justify-content-between align-items-center my-2 pb-3 border-bottom">
      <div class="d-block d-sm-flex align-items-center text-center text-sm-start">
        <a class="d-inline-block flex-shrink-0 mx-auto me-sm-4" [routerLink]="['product', cartItem.product?.id]">
          <img src="{{cartItem.product?.imageSrc ?? 'https://robohash.org/' + cartItem.product?.id + '.png?size=160x160'}}" width="160" alt="Product">
        </a>
        <div class="pt-2">
          <h3 class="product-title fs-base mb-2"><a [routerLink]="['product', cartItem.product?.id]">{{cartItem.product?.name!}}</a></h3>
          <div class="fs-lg text-secondary pt-2">{{cartItem.product?.price! | currency}}</div>
        </div>
      </div>
      <div class="pt-2 pt-sm-0 ps-sm-3 mx-auto mx-sm-0 text-center text-sm-start" style="max-width: 9rem;">
        <label class="form-label" for="{{'quantity-' + i}}" i18n="@@checkoutQuantityLbl">Quantity</label>
        <input class="form-control" type="number" id="{{'quantity-' + i}}" min="1" value="{{cartItem.amount}}">
        <button class="btn btn-link px-0 text-danger" type="button">
          <i class="bi bi-x-circle me-2"></i>
          <span class="fs-sm" i18n="@@checkoutRemoveBtn">Remove</span>
        </button>
      </div>
    </div>
    <div *ngIf="!cart.items?.length">
      <h1 i18n="@@checkoutEmptyTitle">Your cart is empty.</h1>
      <ng-container i18n="@@checkoutEmptySubtitle">Check out items on the page and add it to the cart.</ng-container>
    </div>
    <button class="btn btn-outline-accent d-block w-100 mt-4" type="button">
      <i class="bi bi-arrow-clockwise fs-base me-2"></i>
      <ng-container i18n="@@checkoutUpdateCartBtn">Update cart</ng-container>
    </button>
  </section>
  <!-- Sidebar-->
  <aside class="col-lg-4 pt-4 pt-lg-0 ps-xl-5">
    <div class="bg-white rounded-3 shadow-lg p-4">
      <div class="py-2 px-xl-2">
        <div class="text-center mb-4 pb-3 border-bottom">
          <h2 class="h6 mb-3 pb-1" i18n="@@checkoutSubtotal">Subtotal</h2>
          <h3 class="fw-normal">{{cart.totalPrice | currency}}</h3>
        </div>
        <div class="mb-3 mb-4">
          <label class="form-label mb-3" for="order-comments">
            <span class="badge bg-info fs-xs me-2" i18n="@@checkoutSidebarNote">Note</span>
            <span class="fw-medium" i18n="@@checkoutSidebarNoteComment">Additional comments</span>
          </label>
          <textarea class="form-control" rows="6" id="order-comments"></textarea>
        </div>
        <div class="accordion" id="order-options">
          <div class="accordion-item">
            <h3 class="accordion-header"><a class="accordion-button" href="#promo-code" role="button" data-bs-toggle="collapse" aria-expanded="true" aria-controls="promo-code">Apply promo code</a></h3>
            <div class="accordion-collapse collapse show" id="promo-code" data-bs-parent="#order-options" style="">
              <form class="accordion-body needs-validation" method="post" novalidate="">
                <div class="mb-3">
                  <input class="form-control" type="text" placeholder="Promo code" required="false">
                  <div class="invalid-feedback">Please provide promo code.</div>
                </div>
                <button class="btn btn-outline-primary d-block w-100" type="submit">Apply promo code</button>
              </form>
            </div>
          </div>
        </div>
        <a class="btn btn-primary btn-shadow d-block w-100 mt-4" href="checkout-details.html">
          <i class="bi bi-credit-card fs-lg me-2"></i>
          <ng-container i18n="@@checkoutProceed">Proceed to Checkout</ng-container>
        </a>
      </div>
    </div>
  </aside>
</div>
